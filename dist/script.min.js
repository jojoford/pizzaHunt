const $backBtn=document.querySelector("#back-btn"),$pizzaName=document.querySelector("#pizza-name"),$createdBy=document.querySelector("#created-by"),$createdAt=document.querySelector("#created-at"),$size=document.querySelector("#size"),$toppingsList=document.querySelector("#toppings-list"),$commentSection=document.querySelector("#comment-section"),$newCommentForm=document.querySelector("#new-comment-form");let pizzaId;function printPizza(e){console.log(e),pizzaId=e._id;const{pizzaName:t,createdBy:n,createdAt:r,size:o,toppings:a,comments:m}=e;$pizzaName.textContent=t,$createdBy.textContent=n,$createdAt.textContent=r,$size.textContent=o,$toppingsList.innerHTML=a.map(e=>`<span class="col-auto m-2 text-center btn">${e}</span>`).join(""),m&&m.length?m.forEach(printComment):$commentSection.innerHTML='<h4 class="bg-dark p-3 rounded">No comments yet!</h4>'}function printComment(e){const t=document.createElement("div");t.classList.add("my-2","card","p-2","w-100","text-dark","rounded");const n=`\n      <h5 class="text-dark">${e.writtenBy} commented on ${e.createdAt}:</h5>\n      <p>${e.commentBody}</p>\n      <div class="bg-dark ml-3 p-2 rounded" >\n        ${e.replies&&e.replies.length?`<h5>${e.replies.length} ${1===e.replies.length?"Reply":"Replies"}</h5>\n        ${e.replies.map(printReply).join("")}`:'<h5 class="p-1">No replies yet!</h5>'}\n      </div>\n      <form class="reply-form mt-3" data-commentid='${e._id}'>\n        <div class="mb-3">\n          <label for="reply-name">Leave Your Name</label>\n          <input class="form-input" name="reply-name" required />\n        </div>\n        <div class="mb-3">\n          <label for="reply">Leave a Reply</label>\n          <textarea class="form-textarea form-input"  name="reply" required></textarea>\n        </div>\n\n        <button class="mt-2 btn display-block w-100">Add Reply</button>\n      </form>\n  `;t.innerHTML=n,$commentSection.prepend(t)}function printReply(e){return`\n  <div class="card p-2 rounded bg-secondary">\n    <p>${e.writtenBy} replied on ${e.createdAt}:</p>\n    <p>${e.replyBody}</p>\n  </div>\n`}function handleNewCommentSubmit(e){e.preventDefault();const t=$newCommentForm.querySelector("#comment").value,n=$newCommentForm.querySelector("#written-by").value;if(!t||!n)return!1}function handleNewReplySubmit(e){if(e.preventDefault(),!e.target.matches(".reply-form"))return!1;e.target.getAttribute("data-commentid");const t=e.target.querySelector("[name=reply-name]").value,n=e.target.querySelector("[name=reply]").value;if(!n||!t)return!1}$backBtn.addEventListener("click",function(){window.history.back()}),$newCommentForm.addEventListener("submit",handleNewCommentSubmit),$commentSection.addEventListener("submit",handleNewReplySubmit);